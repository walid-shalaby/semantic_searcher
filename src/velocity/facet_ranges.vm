#**
 *  Display facets based on ranges of values, AKA "Bukets"
 *  e.g.: ranges specified by &facet.range=
 *#

#if($response.response.facet_counts.facet_ranges)
	#foreach ($field in $response.response.facet_counts.facet_ranges)
	  ## Hide facets without value
	  #if($field.value.counts.size() > 0)
		#set($name = $field.key)
		#set($display = $name)
		#set($f = $field.value.counts)
		#set($start = $field.value.start)
		#set($end = $field.value.end)
		#set($gap = $field.value.gap)
		#set($before = $field.value.before)
		#set($after = $field.value.after)
		#if($name=="publication_date" || $name=="application_date")
		<span class="facet-field">
		#if($name=="publication_date")
			Publication Date
		#else
			Application Date
		#end
		</span>
		<ul>  
		##<h2 #annTitle("Facets generated by adding &facet.range= to the request")>
			##if($name=="publication_date")
				##Publication Date
			##else
				##Application Date
			##end
		##</h2>
			#set($name = $field.key)
			#foreach ($facet in $f)
			  #if($facet.value>0)
				  #set($rangeEnd = "#range_get_to_value($facet.key, $gap)")
				  #set($value = "[" + $facet.key + " TO " + $rangeEnd + "}")
				  #set($facetURL = "#url_for_facet_range_filter($name, $value)")
				  #if ($facetURL != '')
					<li><a href="$facetURL">#date_year($facet.key)</a> ($facet.value)</li>
				  #end
			  #end
			#end
		</ul>
		#else
			#display_facet_range($f, $display, $name, $start, $end, $gap, $before, $after)
		#end
	  #end  ## end if has any values
	#end    ## end for each facet range

#end