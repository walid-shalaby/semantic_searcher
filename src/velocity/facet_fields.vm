#**
 *  Display facets based on field values
 *  e.g.: fields specified by &facet.field=
 *#

##if($response.facetFields.size>0)
  #foreach($field in $response.facetFields)
    ## Hide facets without value
    #if($field.values.size() > 0)
	  ##<h2 #annTitle("Facets generated by adding &facet.field= to the request")>
	  ##if($field.name=="ipc_section")
		##IPC Section
	  ##end
	  ##</h2>
	  
      <span class="facet-field">
	  #if($field.name=="ipc_section")
		IPC Section
	  #end
	  </span>
      <ul>
        #foreach($facet in $field.values)
         #if($facet.count > 0)
            #if($field.name=="ipc_section") 
			 #if($ipc_sections_titles.get($facet.name))
				#set ( $displayname = $ipc_sections_titles.get($facet.name) + " (" + $facet.name + ")")
			 #else
			    #set ( $displayname = "") ##$facet.name				
			 #end
            #elseif($field.name=="class") 
             #set ( $displayname = "(" + $facet.name + ") " + $patent_class_titles.get($facet.name) )
            #elseif($field.name=="state") 
             #set ( $displayname = $facet.name.toUpperCase() ) 
            #else
             #set ( $displayname = $facet.name )
            #end
		  #if($facet.name!=$null && $displayname!="")
          <li>
			<a href="#url_for_facet_filter($field.name, $facet.name)">#if($facet.name!=$null && $displayname!="")$displayname#else<em>missing</em>#end</a> ($facet.count)
          </li>
		  #end
	      #end
        #end
      </ul>
    #end  ## end if > 0
  #end    ## end for each facet field
##end      ## end if response has facet fields
